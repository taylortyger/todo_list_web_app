{% extends "todo_list/base.html" %}

{% block title %}{{ todoList.title }}{% endblock %}

{% block content %}
<h1>{{todoList.title}}</h1>

{% if error_message %}<p class="error_message"><strong>{{ error_message }}</strong></p>{% endif %}

<form id="manage_list_form" action="{% url 'todo_list:updateList' %}" method="post">
{% csrf_token %}

{% for task in todoList.getCurrentTasks %}
    <div task_id="{{ task.id }}" currenttask="true">
        <input style="display: inline;" type="checkbox" name="task_completed" value="{{ task.id }}">
        <div style="display: inline;">{{task.task_text}}</div>
        <input type="hidden" name="task_priority {{task.id}}" value="{{task.priority}}" >
    </div>
{% endfor %}

</form>

<form id="add_new_task" action="{% url 'todo_list:addNewTask' todoList.id %}" method="post">
    {% csrf_token %}
    <input type="text" name="newtask_text" placeholder="Add New Task...">
    {% if todoList.task_set.last %}
        <input type="hidden" name="newtask_priority" value="{{ todoList.task_set.last.priority|add:1 }}">
    {% else %}
        <input type="hidden" name="newtask_priority" value="0">
    {% endif %}
    <input type="submit" value="Add Task">
</form>

{% endblock %}